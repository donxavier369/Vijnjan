import{r as o,j as e,k as I,T as D,t as u,B as r}from"./index-BDOFKY0g.js";import{G as A,A as B,D as M}from"./Carousel-zyowwnfi.js";import{u as R}from"./index.esm-Bne98N_B.js";const L=()=>{const[x,p]=o.useState(!0),[i,g]=o.useState([]),[m,h]=o.useState(null),{register:_,handleSubmit:E,watch:W,formState:{errors:b}}=R(),[j,t]=o.useState(!1),f=async()=>{try{await D("token-admin-access-vini","admin")?console.log("not expired"):(console.log("token -expired"),window.location.href="/admin-login")}catch(s){console.log(s)}};o.useEffect(()=>{f()},[]),o.useState(null);const[k,y]=o.useState(0),[v,c]=o.useState(!1),N=()=>{t(!0)},C=()=>{t(!1)},w=s=>{h(s.target.files[0])},n=async()=>{try{const s=await A();s.success===!0?(g(s.data),p(!1)):console.log(s)}catch(s){console.log(s)}};o.useEffect(()=>{n()},[]),console.log(i,"carosueldata");const S=async s=>{s.preventDefault();try{const a=await u("token-admin-refresh-vini");if(console.log(a,"token"),m.size>1024*1024){r.error("Image size exceeds 1 MB limit");return}const d=new FormData;d.append("carousel_image",m),console.log(d,"formdata");const l=await B(d,a.access);console.log(l,"response"),l.success===!0?(console.log(l),r.success(`${l.message}`),n(),t(!1)):(console.log(l,"error"),r.error(`${l.message}`))}catch(a){console.log(a)}},F=async()=>{try{const s=await u("token-admin-refresh-vini"),a=await M(k,s.access);a.success&&(r.success(`${a.message}`),n(),c(!1))}catch{}};return e.jsxs("div",{children:[e.jsx(I,{}),e.jsxs("div",{className:"row home",children:[e.jsx("div",{className:"d-flex justify-content-end mt-5 mb-5",style:{paddingRight:"5em"},children:e.jsx("div",{style:{maxWidth:"200px"},children:e.jsx("button",{className:"btn btn-success",onClick:N,children:"Add Carousel"})})}),x?e.jsx("div",{class:"loader-container",children:e.jsx("div",{class:"loader"})}):i.map((s,a)=>e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-6",children:e.jsxs("div",{className:"card mb-3",children:[e.jsx("img",{className:"card-img-top",src:s.carousel_image?s.carousel_image:"",alt:"Card image cap",style:{width:"300px",height:"190px"}}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:s.id}),e.jsx("a",{className:"btn btn-danger",onClick:()=>{y(s.id),c(!0)},children:"Delete"})]})]})},a))]}),j&&e.jsx("div",{className:"modal ",tabIndex:"-1",role:"dialog",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsx("div",{className:"modal-content",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10.8px)",WebkitBackdropFilter:"blur(25.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"modal-body",children:[e.jsx("button",{"aria-label":"Close",className:"btn-close","data-bs-dismiss":"modal",type:"button",onClick:C}),e.jsxs("div",{className:"form-group m-2 mt-4",children:[e.jsx("label",{htmlFor:"thumbnail",className:"text-black",children:"carousel Image"}),e.jsx("input",{type:"file",className:"form-control",name:"carousel_image",id:"image",onChange:w}),b.carousel_image&&e.jsx("span",{className:"text-danger",children:b.carousel_image.message})]}),e.jsxs("div",{className:"d-flex justify-content-between ",children:[e.jsx("button",{"aria-label":"Close",className:"btn btn-danger mt-5","data-bs-dismiss":"modal",type:"button",onClick:()=>t(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary btn-block mt-5",type:"submit",children:"Submit"})]})]})})})})}),v&&e.jsx("div",{className:"modal ",tabIndex:"-1",role:"dialog",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("div",{class:"modal-dialog",role:"document",children:e.jsx("div",{class:"modal-content",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsxs("div",{class:"modal-body",children:[e.jsx("h5",{class:"modal-title",id:"exampleModalLabel",children:"Confirmation "}),e.jsxs("div",{class:"modal-body",children:[e.jsx("p",{className:"text-white",children:"Are you sure you want to delete?"}),e.jsxs("div",{className:"d-flex justify-content-between ",children:[e.jsx("button",{type:"button",class:"btn btn-secondary",id:"close-modal",onClick:()=>c(!1),children:"No"}),e.jsx("a",{class:"btn btn-danger",type:"button",onClick:F,children:"Yes"})]})]})]})})})})]})};export{L as default};
