import{r as t,j as e,k as w,T as F,b as x,B as i}from"./index-BDOFKY0g.js";import{G as I,A as R,D as A}from"./Category-DO0Ix0aI.js";import{u as B}from"./index.esm-Bne98N_B.js";const _=()=>{const{register:u,handleSubmit:g,watch:D,formState:{errors:b}}=B(),[h,c]=t.useState(!1),p=()=>{c(!0)},y=async()=>{try{await F("token-admin-access-vini","admin")?console.log("not expired"):(console.log("token -expired"),window.location.href="/admin-login")}catch(s){console.log(s)}};t.useEffect(()=>{y()},[]);const[j,f]=t.useState([]),[m,k]=t.useState(0),[v,n]=t.useState(!1),[N,l]=t.useState(!0),d=async()=>{try{const s=await I();s.success===!0?(f(s.data),console.log(s),l(!1)):console.log(s,"response error")}catch(s){console.log(s)}};t.useEffect(()=>{d()},[]);const C=async s=>{l(!0);try{const a={refresh:localStorage.getItem("token-admin-refresh-vini")},o=await x(a);l(!1),o.success===!0?(localStorage.setItem("token-admin-access-vini",o.access),console.log(o)):console.log(o,"error");const r=await R(s,o.access);r.success===!0?(i.success(`${r.message}`),console.log(r,"response"),d(),c(!1)):(i.error(`${r.message}`),console.log(r,"response error"))}catch(a){console.log(a)}},S=async()=>{l(!0);try{console.log(m,"deleted id ");const s={refresh:localStorage.getItem("token-admin-refresh-vini")},a=await x(s);a.success===!0?(localStorage.setItem("token-admin-access-vini",a.access),console.log(a)):console.log(a,"error");const o=await A(m,a.access);l(!1),o.success===!0&&(d(),i.success(o.message),n(!1))}catch(s){console.log(s)}};return e.jsxs("div",{children:[e.jsx(w,{}),e.jsxs("div",{className:"row home",children:[e.jsx("div",{className:"d-flex justify-content-end mt-5 mb-5",style:{paddingRight:"5em"},children:e.jsx("div",{className:"align-center",style:{maxWidth:"200px"},children:e.jsx("button",{className:"btn btn-success",onClick:p,children:"Add Category"})})}),N?e.jsx("div",{class:"loader-container",children:e.jsx("div",{class:"loader"})}):e.jsx("div",{className:"mt-0  m-5 p-3",style:{backgroundColor:"#fff",borderRadius:"25px"},children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"category name"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:j.map((s,a)=>e.jsxs("tr",{children:[e.jsx("th",{children:s.id}),e.jsx("td",{children:s.category_name}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-danger","data-bs-target":"#modaldemo3","data-bs-toggle":"modal",onClick:()=>{k(s.id),n(!0)},children:"Delete"})})]},a))})]})}),h&&e.jsx("div",{className:"modal ",tabIndex:"-1",role:"dialog",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsx("div",{className:"modal-content",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("form",{onSubmit:g(C),children:e.jsxs("div",{className:"modal-body",children:[e.jsx("button",{"aria-label":"Close",className:"btn-close","data-bs-dismiss":"modal",type:"button",onClick:()=>c(!1)}),e.jsxs("div",{className:"form-group m-2 mt-4",children:[e.jsx("label",{htmlFor:"thumbnail",className:"text-black",children:"Category Name "}),e.jsx("input",{...u("category_name",{required:"category name is required"}),type:"text",className:"form-control",placeholder:"category name",name:"category_name"}),b.category_name&&e.jsx("span",{className:"text-danger",children:b.category_name.message})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{"aria-label":"Close",className:"btn btn-outline-danger mt-5","data-bs-dismiss":"modal",type:"button",onClick:()=>c(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary btn-block mt-5",type:"submit",children:"Submit"})]})]})})})})}),v&&e.jsx("div",{className:"modal ",tabIndex:"-1",role:"dialog",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("div",{class:"modal-dialog",role:"document",children:e.jsx("div",{class:"modal-content",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsxs("div",{class:"modal-body",children:[e.jsxs("div",{class:"modal-header",children:[e.jsx("h5",{class:"modal-title",id:"exampleModalLabel",children:"Confirmation "}),e.jsx("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:()=>n(!1),children:e.jsx("span",{"aria-hidden":"true",children:"Ã—"})})]}),e.jsx("div",{class:"modal-body",children:e.jsx("p",{children:"Are you sure you want to delete?"})}),e.jsxs("div",{className:"d-flex justify-content-between mt-5",children:[e.jsx("button",{type:"button",class:"btn btn-secondary",id:"close-modal",onClick:()=>n(!1),children:"No"}),e.jsx("a",{class:"btn btn-danger",type:"button",onClick:S,children:"Yes"})]})]})})})})]})]})};export{_ as default};
