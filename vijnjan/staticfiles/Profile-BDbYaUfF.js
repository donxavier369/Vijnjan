import{r,j as e,L as g,G as B,B as c,b as E,A as U,d as A}from"./index-BDOFKY0g.js";import{u as D}from"./index.esm-Bne98N_B.js";import{P as $,a as W}from"./ProfileEdit-B00PBryf.js";/* empty css               */const G=""+new URL("fg-3-BBpAwA3X.jpg",import.meta.url).href;function H(){const{register:N,handleSubmit:v,reset:w,watch:O,formState:{errors:J}}=D(),[s,y]=r.useState([]),[i,k]=r.useState([]),[S,C]=r.useState(!0),[d,x]=r.useState(null),[F,m]=r.useState(!1),[h,f]=r.useState(!1),[b,p]=r.useState(!1),P="token-refresh-vini",I=()=>{f(!0)},q=()=>{p(!0)},L=a=>{const l=a.target.files[0];x(l)};console.log(d,"selectfile"),console.log(i,"qualification");const u=async()=>{try{const a=localStorage.getItem("tutor-data-vini"),l=JSON.parse(a),o=await B(l[0].id);o.success===!0&&(console.log(o,"response success"),y(o.profile),k(o.qualifications),C(!1))}catch(a){c.error(`${a}`)}};r.useEffect(()=>{u()},[]);const M=async a=>{try{const l=localStorage.getItem("tutor-data-vini"),j={tutor:JSON.parse(l)[0].id,qualification:a.qualification,certificate:d};console.log(j,"formdata");const _={refresh:localStorage.getItem("token-refresh-vini")},t=await E(_);t.success===!0?(localStorage.setItem("token-refresh-vini",t.access),console.log(t)):console.log(t,"error"),console.log(t.access,"access");const n=await U(j,t.access);n.success===!0?(u(),console.log(n,"sucess"),c.success(`${n.message}`),w(),x(null)):console.log(n,"error")}catch(l){console.log(l),c.error(`${l}`)}},R=async()=>{try{const a={refresh:localStorage.getItem("token-refresh-vini")},l=await A(a);l.success?(localStorage.removeItem("token-access-vini"),localStorage.removeItem("tutor-data-vini"),localStorage.removeItem("token-refresh-vini"),c.success(`${l.message}`),window.location.href="/login"):c.success(`${l.message}`)}catch(a){console.log(a)}};return e.jsxs("div",{children:[e.jsx("header",{className:"main-header",children:e.jsx("nav",{className:"main-menu",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"main-menu__logo mb-4",children:e.jsx(g,{to:"/tutor",children:e.jsx("i",{className:"icon-arrow-left"})})}),e.jsx("div",{className:"main-menu__nav"}),e.jsx("div",{className:"main-menu__right"})]})})}),S?e.jsx("div",{class:"loader-container",children:e.jsx("div",{class:"loader"})}):e.jsx("div",{className:"mainbody mt-5",children:e.jsx("div",{className:"page-content page-container",id:"page-content",children:e.jsx("div",{className:"padding",children:e.jsx("div",{className:"row container d-flex justify-content-center",children:e.jsx("div",{className:"col-xl-12 col-md-12",children:e.jsx("div",{className:"card user-card-full",children:e.jsxs("div",{className:"row m-l-0 m-r-0",children:[e.jsx("div",{className:"col-sm-4 col-md-12 col-md-12 bg-c-lite-green user-profile",children:e.jsxs("div",{className:"card-block text-center text-white",children:[e.jsx("div",{className:"m-b-1",children:e.jsx("img",{src:s.profile_image?s.profile_image:G,className:"img-radius",alt:"User-Profile-Image",style:{width:130,borderRadius:"50%",height:130}})}),e.jsx("a",{style:{cursor:"pointer"},children:e.jsx(g,{onClick:q,children:"Edit"})}),e.jsx("p",{className:"mt-4",style:{fontWeight:"900",fontSize:"25px"},children:s?s.username:""}),e.jsx("h6",{className:"f-w-600",children:s?s.person:""}),e.jsx("i",{className:" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"})]})}),e.jsx("div",{className:"col-sm-8",children:e.jsxs("div",{className:"card-block",children:[e.jsx("ul",{class:"social-link list-unstyled m-t-40 m-b-10 ",style:{marginLeft:"20em"},children:e.jsxs("div",{className:"d-flex justify-content-end mt-5",children:[e.jsx("button",{className:"btn btn-success",style:{borderRadius:"25px"},onClick:I,children:"Change password"}),e.jsx("button",{className:"btn btn-danger ms-4",style:{borderRadius:"25px"},onClick:()=>m(!0),children:"Logout"})]})}),e.jsx("h6",{className:"m-b-20 p-b-5 b-b-default f-w-600",children:"Contact"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-sm-6",children:[e.jsx("p",{className:"m-b-10 f-w-600",children:"Email"}),e.jsx("h6",{className:"text-muted f-w-400",children:s?s.email:""})]}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("p",{className:"m-b-10 f-w-600",children:"User Id"}),e.jsx("h6",{className:"text-muted f-w-400",children:s?s.id:""})]})]}),e.jsx("h6",{className:"m-b-20 m-t-40 p-b-5 b-b-default f-w-600",children:"Informations"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-sm-6",children:[e.jsx("p",{className:"m-b-10 f-w-600",children:"Gender"}),e.jsx("h6",{className:"text-muted f-w-400",children:s?s.username:""})]}),e.jsxs("div",{className:"col-sm-6",children:[e.jsx("p",{className:"m-b-10 f-w-600",children:"Date Of Birth"}),e.jsx("h6",{className:"text-muted f-w-400",children:s?s.date_of_birth:""})]})]})]})}),e.jsx("div",{className:"col-lg-8",children:e.jsx("div",{className:"card mb-4",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3"}),e.jsx("div",{className:"col-sm-9 p-4",style:{borderRadius:"35px",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(15.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("form",{onSubmit:v(M),children:e.jsxs("div",{className:"form-group local-forms",children:[d&&e.jsx("iframe",{src:d,style:{width:"100%",height:"200px"},frameBorder:"0",scrolling:"auto",allowFullScreen:!0,title:"PDF Preview"}),e.jsx("input",{...N("qualification"),type:"text",className:"form-control mb-4 mt-3",placeholder:"Qualification...",required:!0}),e.jsx("input",{className:"form-control",type:"file",onChange:L,accept:"application/pdf",required:!0}),e.jsxs("label",{className:"mt-4",children:["Please Upload Certificates in pdf format"," "]}),e.jsx("button",{className:"btn m-2 btn-primary",style:{borderRadius:"15px"},children:"Upload"})]})})})]})})})}),e.jsx("div",{className:"row",children:i&&i.length!==0?i.map((a,l)=>e.jsx("div",{className:"col-lg-4 ",children:e.jsxs("div",{className:"card mb-3",children:[e.jsx("iframe",{src:a.certificate,style:{width:"100%",height:"200px"},frameBorder:"0",scrolling:"auto",allowFullScreen:!0,title:"PDF Preview"}),e.jsx("div",{className:"card-body",children:e.jsx("h5",{className:"card-title",children:a.qualification})})]})},l)):""})]})})})})})})}),F&&e.jsx("div",{className:"modal bg",tabIndex:"-1",role:"dialog",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(15.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("div",{class:"modal-dialog",role:"document",children:e.jsx("div",{class:"modal-content",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsxs("div",{className:"modal-body",children:[e.jsx("button",{"aria-label":"Close",className:"btn-close",onClick:()=>m(!1),type:"button"}),e.jsxs("div",{class:"modal-body",children:[e.jsx("p",{children:"Are you sure, you want to Logout?"}),e.jsxs("div",{className:"d-flex justify-content-between mt-5",children:[e.jsx("button",{type:"button",class:"btn btn-secondary","aria-label":"Close","data-bs-dismiss":"modal",id:"close-modal",onClick:()=>m(!1),children:"No"}),e.jsx("a",{onClick:R,class:"btn btn-danger",type:"button",children:"Logout"})]})]})]})})})}),h&&e.jsx($,{Modal:h,setModal:f}),b&&e.jsx(W,{Modal:b,setModal:p,handle:u,users:P})]})}export{H as default};
