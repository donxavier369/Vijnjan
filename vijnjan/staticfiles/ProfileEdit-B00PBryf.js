import{j as e,b as y,B as t,C as N,r as h,t as v,P as _}from"./index-BDOFKY0g.js";import{u as f}from"./index.esm-Bne98N_B.js";const F=({Modal:w,setModal:r})=>{const{register:i,handleSubmit:c,watch:x,formState:{errors:o}}=f(),g=async d=>{try{const n={refresh:localStorage.getItem("token-admin-refresh-vini")},s=await y(n);s.success===!0?(localStorage.setItem("token-admin-access-vini",s.access),console.log(s)):(console.log(s,"error"),t.error(s.message));const b={old_password:d.old_password,new_password:d.new_password},a=await N(b,s.access);a.success===!0?(console.log(a),t.success(a.message),r(!1)):(console.log(a,"error"),t.error(a.message))}catch(n){console.log(n)}};return e.jsx("div",{children:e.jsx("div",{className:"modal bg",tabIndex:"-1",role:"dialog",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(15.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsx("div",{className:"modal-content",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("form",{onSubmit:c(g),children:e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group m-2 mt-4",children:[e.jsx("label",{htmlFor:"old_password",style:{color:"#fff"},children:"Old password"}),e.jsx("input",{...i("old_password",{required:"old password is required"}),type:"text",className:"form-control",name:"old_password"}),o.old_password&&e.jsx("span",{className:"text-danger",children:o.old_password.message})]}),e.jsxs("div",{className:"form-group m-2 mt-4",children:[e.jsx("label",{htmlFor:"new_password",style:{color:"#fff"},children:"New password"}),e.jsx("input",{...i("new_password",{required:"new password is required"}),type:"text",className:"form-control",name:"new_password"}),o.new_password&&e.jsx("span",{className:"text-danger",children:o.new_password.message})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{"aria-label":"Close",className:"btn btn-outline-danger mt-5","data-bs-dismiss":"modal",type:"button",onClick:()=>r(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary btn-block mt-5",type:"submit",children:"Change Password"})]})]})})})})})})},P=({Modal:w,setModal:r,handle:i,users:c})=>{const{register:x,handleSubmit:o,watch:g,formState:{errors:d}}=f(),[n,s]=h.useState(null),[b,a]=h.useState(!1),j=p=>{const l=p.target.files[0];s(l)},k=async p=>{a(!0);try{console.log(p),console.log(c,"users");const l=await v(c),u=new FormData;u.append("profile_image",n);const m=await _(u,l.access);a(!1),m.success===!0?(i(),t.success(`${m.message}`),r(!1)):(t.error(`${m.message}`),console.log(m))}catch(l){console.log(l),t.error(l)}};return e.jsx("div",{children:e.jsx("div",{className:"modal bg",tabIndex:"-1",role:"dialog",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(15.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsx("div",{className:"modal-content",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:b?e.jsx("div",{class:"loader-container",children:e.jsx("div",{class:"loader"})}):e.jsx("form",{onSubmit:o(k),children:e.jsxs("div",{className:"modal-body",children:[e.jsx("button",{"aria-label":"Close",className:"btn-close","data-bs-dismiss":"modal",type:"button",onClick:()=>r(!1)}),e.jsxs("div",{className:"form-group m-2 mt-4",children:[e.jsx("input",{...x("profile_image",{required:"profile image is required"}),type:"file",className:"form-control",name:"profile_image",onChange:j}),d.profile_image&&e.jsx("span",{className:"text-danger",children:d.profile_image.message})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-5",children:[e.jsx("button",{"aria-label":"Close",className:"btn btn-danger","data-bs-dismiss":"modal",type:"button",onClick:()=>r(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",type:"submit",children:"Upload"})]})]})})})})})})};export{F as P,P as a};
