import{r as o,j as e,k as R,l as $,U as D,T as L,m as W,B as h,t as G,V as Y}from"./index-BDOFKY0g.js";function H(){const v=async()=>{try{await L("token-admin-access-vini","admin")?console.log("not expired"):(console.log("token -expired"),window.location.href="/admin-login")}catch(s){console.log(s)}};o.useEffect(()=>{v()},[]);const[l,N]=o.useState([]),[c,C]=o.useState([]),[S,x]=o.useState(!0),[M,m]=o.useState(!1),[g,j]=o.useState(null),[w,p]=o.useState(!1),[I,a]=o.useState(!1),[U,P]=o.useState(0),[B,q]=o.useState(1),[n,A]=o.useState(1),r=10;Math.ceil(l.length/r);const f=(B-1)*r,T=Math.min(f+r,l.length);l.slice(f,T);const k=Math.ceil(c.length/r),i=(n-1)*r,V=Math.min(i+r,c.length),y=c.slice(i,V),b=s=>{A(s)},d=async()=>{try{const s=await W();s.success===!0?(console.log(s,"success"),N(s.student_profile),C(s.tutor_profile),x(!1)):console.log(s,error)}catch(s){h.error(`${s}`)}};o.useEffect(()=>{d()},[]),console.log(c,"tutor"),console.log(l,"student");const E=async()=>{const s=U;console.log(s,"itemid");try{const t=await G("token-admin-refresh-vini"),u=await Y(s,t.access);u.success===!0?(h.success(`${u.message}`),d(),a(!1)):(h.error(`${u.message}`),console.log(u,"error"))}catch(t){console.log(t),h.error(`${t}`)}},F=s=>{try{j(s),m(!0)}catch(t){console.log(t)}},_=s=>{try{j(s),p(!0)}catch(t){console.log(t)}};return e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsx("section",{className:"course-details home",children:e.jsx("div",{className:"container",children:S?e.jsx("div",{class:"loader-container",children:e.jsx("div",{class:"loader"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-0  m-5 p-3",style:{backgroundColor:"#fff",borderRadius:"25px"},children:[e.jsx("h4",{className:"p-4",style:{textAlign:"center"},children:"Tutor Details"}),e.jsxs("table",{className:"table table-responsive ",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"SL No"}),e.jsx("th",{scope:"col",children:"ID"}),e.jsx("th",{scope:"col",children:"Username"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Action"}),e.jsx("th",{scope:"col",children:"Action"})]})}),e.jsx("tbody",{children:y.length!==0?y.map((s,t)=>e.jsxs("tr",{children:[e.jsx("th",{children:i+t+1}),e.jsx("th",{children:s.id}),e.jsx("td",{children:s.username}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.is_tutor_verify===!0?e.jsx("span",{style:{color:"green"},children:"Verified"}):e.jsx("button",{className:"btn btn-danger",onClick:()=>{P(s.id),a(!0)},children:"Click to verify"})}),e.jsx("td",{children:s.is_active===!0?e.jsx("button",{className:"btn btn-danger",onClick:()=>{F(s.id)},children:"Block"}):e.jsx("button",{className:"btn btn-success",onClick:()=>_(s.id),children:"unblock"})})]},i+t)):""})]})]}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-primary m-3",onClick:()=>b(n-1),disabled:n===1,children:"Previous"}),Array.from({length:k},(s,t)=>e.jsx("button",{className:"btn btn-success m-3",onClick:()=>b(t+1),children:t+1},t)),e.jsx("button",{className:"btn btn-primary m-3",onClick:()=>b(n+1),disabled:n===k,children:"Next"})]})]})})}),I&&e.jsx("div",{className:"modal bg",tabIndex:"-1",role:"dialog",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsx("div",{class:"modal-dialog",role:"document",children:e.jsx("div",{class:"modal-content",style:{display:"block",background:"rgba(102, 54, 255, 0.12)",borderRadius:"16px",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5.8px)",WebkitBackdropFilter:"blur(5.8px)",border:"1px solid rgba(255, 255, 255, 0.26)"},children:e.jsxs("div",{className:"modal-body",children:[e.jsx("button",{"aria-label":"Close",className:"btn-close",onClick:()=>a(!1),type:"button"}),e.jsx("div",{class:"modal-body",children:e.jsx("p",{className:"text-white",children:"Are you sure, You want to Verify this Tutor?"})}),e.jsxs("div",{className:"d-flex justify-content-between mt-5",children:[e.jsx("button",{type:"button",class:"btn btn-secondary","aria-label":"Close","data-bs-dismiss":"modal",id:"close-modal",onClick:()=>a(!1),children:"No"}),e.jsx("a",{onClick:E,class:"btn btn-success",type:"button",children:"Verify"})]})]})})})}),M&&e.jsx($,{item:g,setModal:m,setIsLoading:x,Userdatafetch:d}),w&&e.jsx(D,{item:g,setModal:p,setIsLoading:x,Userdatafetch:d})]})}export{H as default};
